<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom Cuts - Video Manager</title>
  <link rel="stylesheet" href="manager.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>Custom Cuts Video Manager</h1>
      <p class="subtitle">Manage all your tagged videos and playlists</p>
    </header>

    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="videos">Videos</button>
      <button class="tab-btn" data-tab="playlists">Playlists</button>
      <button class="tab-btn" data-tab="bookmarks">Bookmarks</button>
      <button class="tab-btn" data-tab="packs">Packs</button>
    </nav>

    <!-- Videos Tab -->
    <div id="videos-tab" class="tab-content active">
    <section class="controls">
      <div class="search-box">
        <input type="text" id="search-input" placeholder="Search videos by URL or tag...">
      </div>

      <div class="tag-filter-section">
        <div class="tag-filter-row">
          <div class="tag-filter-group">
            <label>Must have tags (<span id="include-mode-toggle" class="mode-toggle" title="Click to toggle AND/OR">AND</span>):</label>
            <div id="include-tags" class="tag-filter-chips"></div>
          </div>
          <div class="tag-filter-group">
            <label>Exclude tags:</label>
            <div id="exclude-tags" class="tag-filter-chips"></div>
          </div>
        </div>
      </div>

      <div class="filter-sort-row">
        <div class="filter-group">
          <label>Rating by:</label>
          <select id="rating-person-filter">
            <option value="avg">Average</option>
            <option value="P1">P1</option>
            <option value="P2">P2</option>
            <option value="P3">P3</option>
            <option value="P4">P4</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Min rating:</label>
          <select id="rating-filter">
            <option value="">Any</option>
            <option value="5">5 stars</option>
            <option value="4">4+</option>
            <option value="3">3+</option>
            <option value="2">2+</option>
            <option value="1">1+</option>
            <option value="0">Unrated</option>
          </select>
        </div>

        <div class="filter-group">
          <label>Sort by:</label>
          <select id="sort-by">
            <option value="recent">Recently Tagged</option>
            <option value="rating">Highest Rated</option>
            <option value="tags">Most Tags</option>
            <option value="alpha">Alphabetical (URL)</option>
          </select>
        </div>
      </div>
    </section>

    <section class="stats-bar">
      <span id="video-count">0 videos</span>
      <span id="tag-count">0 total tags</span>
      <button id="add-filtered-to-playlist-btn" class="btn btn-secondary stats-btn">Add filtered to playlist...</button>
    </section>

    <section id="video-list" class="video-list">
      <p class="empty-state">No tagged videos found. Start tagging videos to see them here!</p>
    </section>
    </div>

    <!-- Playlists Tab -->
    <div id="playlists-tab" class="tab-content">
      <section class="playlist-controls">
        <div class="create-playlist-section">
          <h3>Create New Playlist</h3>
          <div class="create-playlist-form">
            <input type="text" id="new-playlist-name" placeholder="Playlist name..." maxlength="100">
            <button id="create-playlist-btn" class="btn btn-primary">Create Playlist</button>
          </div>
        </div>
      </section>

      <section class="stats-bar">
        <span id="playlist-count">0 playlists</span>
        <button id="queue-all-shuffle-btn" class="btn btn-secondary stats-btn">Queue All Shuffled</button>
      </section>

      <section id="playlist-list" class="playlist-list">
        <p class="empty-state">No playlists yet. Create one above!</p>
      </section>
    </div>

    <!-- Bookmarks Tab -->
    <div id="bookmarks-tab" class="tab-content">
      <section class="bookmarks-controls">
        <div class="bookmarks-search-box">
          <input type="text" id="bookmarks-search-input" placeholder="Search bookmarks by title or tag...">
          <button id="bookmarks-search-clear" class="search-clear-btn hidden">&times;</button>
        </div>

        <div class="filter-sort-row" style="margin-top: 16px;">
          <div class="filter-group">
            <label>Rating by:</label>
            <select id="bookmarks-rating-person-filter">
              <option value="avg">Average</option>
              <option value="P1">P1</option>
              <option value="P2">P2</option>
              <option value="P3">P3</option>
              <option value="P4">P4</option>
            </select>
          </div>

          <div class="filter-group">
            <label>Min rating:</label>
            <select id="bookmarks-rating-filter">
              <option value="">Any</option>
              <option value="5">5 stars</option>
              <option value="4">4+</option>
              <option value="3">3+</option>
              <option value="2">2+</option>
              <option value="1">1+</option>
              <option value="0">Unrated only</option>
              <option value="tagged">Tagged only</option>
            </select>
          </div>

          <div class="filter-group">
            <label>Sort by:</label>
            <select id="bookmarks-sort-by">
              <option value="alpha">Alphabetical</option>
              <option value="rating">Highest Rated</option>
              <option value="tags">Most Tags</option>
            </select>
          </div>
        </div>
      </section>

      <section class="bookmarks-header">
        <div class="bookmarks-breadcrumb" id="bookmarks-breadcrumb">
          <span class="breadcrumb-item root" data-id="0">Bookmarks</span>
        </div>
        <div class="bookmarks-stats">
          <span id="bookmarks-folder-count">0 folders</span>
          <span id="bookmarks-item-count">0 bookmarks</span>
          <span id="bookmarks-tagged-count">0 tagged</span>
        </div>
      </section>

      <section id="bookmarks-list" class="bookmarks-list">
        <p class="empty-state">Loading bookmarks...</p>
      </section>
    </div>

    <!-- Packs Tab -->
    <div id="packs-tab" class="tab-content">
      <section class="packs-controls">
        <div class="current-pack-section">
          <h3>Current Pack</h3>
          <p class="pack-description">Select which pack of tags to manage. Videos and tags are organized by pack.</p>
          <div class="current-pack-selector">
            <select id="current-pack-select">
              <option value="default">default</option>
            </select>
            <label class="pack-checkbox-label">
              <input type="checkbox" id="mark-pack-hidden">
              <span>Mark as Hidden</span>
            </label>
          </div>
          <div class="show-hidden-control">
            <label class="pack-checkbox-label">
              <input type="checkbox" id="show-hidden-packs">
              <span>Show Hidden Packs</span>
            </label>
            <span id="hidden-packs-count" class="hidden-count"></span>
          </div>
        </div>
      </section>

      <section class="packs-management">
        <h3>Manage Packs</h3>
        <div class="pack-actions-row">
          <div class="create-pack-section">
            <input type="text" id="new-pack-name" placeholder="New pack name..." maxlength="50">
            <button id="create-pack-btn" class="btn btn-primary">Create Pack</button>
          </div>
        </div>
        <div class="pack-migrate-section">
          <label>Migrate current pack's data into:</label>
          <div class="pack-migrate-controls">
            <select id="migrate-target-pack">
              <option value="">Select target pack...</option>
            </select>
            <button id="migrate-move-btn" class="btn btn-secondary" disabled>Move</button>
            <button id="migrate-copy-btn" class="btn btn-secondary" disabled>Add Copy</button>
          </div>
          <p class="pack-migrate-hint">Move removes from current pack. Add Copy keeps in both packs.</p>
        </div>
      </section>

      <section class="stats-bar">
        <span id="pack-count">1 pack</span>
        <span id="pack-videos-count">0 videos in current pack</span>
      </section>

      <section id="packs-list" class="packs-list">
        <p class="empty-state">Loading packs...</p>
      </section>
    </div>

    <!-- Modal for editing tags -->
    <div id="edit-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Edit Video Tags</h2>
          <button id="close-modal" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <div class="video-url-display">
            <label>Video URL:</label>
            <a id="modal-video-url" href="#" target="_blank"></a>
          </div>

          <div class="modal-section">
            <h3>Ratings</h3>
            <div class="modal-rating-container">
              <div class="modal-person-selector">
                <label>Rate as:</label>
                <select id="modal-rating-person">
                  <option value="P1">P1</option>
                  <option value="P2">P2</option>
                  <option value="P3">P3</option>
                  <option value="P4">P4</option>
                </select>
              </div>
              <div class="rating-stars" id="modal-rating-stars">
                <span class="star" data-rating="1">&#9733;</span>
                <span class="star" data-rating="2">&#9733;</span>
                <span class="star" data-rating="3">&#9733;</span>
                <span class="star" data-rating="4">&#9733;</span>
                <span class="star" data-rating="5">&#9733;</span>
              </div>
            </div>
            <div id="modal-all-ratings" class="modal-all-ratings"></div>
          </div>

          <div class="modal-section">
            <h3>Existing Tags</h3>
            <div id="modal-tags-list" class="modal-tags-list">
              <p class="empty-text">No tags</p>
            </div>
          </div>

          <div class="modal-section">
            <h3>Add New Tag</h3>
            <div class="add-tag-form">
              <div class="form-row">
                <input type="text" id="modal-tag-name" placeholder="Tag name..." maxlength="128">
                <select id="modal-intensity">
                  <option value="0">No Intensity</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
              </div>
              <div class="form-row">
                <input type="text" id="modal-start-time" placeholder="Start (m:ss)">
                <span>to</span>
                <input type="text" id="modal-end-time" placeholder="End (m:ss)">
              </div>
              <button id="modal-add-tag" class="btn btn-primary">Add Tag</button>
            </div>
          </div>

          <div class="modal-section">
            <h3>Quick Tags</h3>
            <div id="quick-tags-container" class="quick-tags">
              <span class="empty-text">No tags yet</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="delete-video-btn" class="btn btn-danger">Delete Video Data</button>
          <button id="open-video-btn" class="btn btn-primary">Open Video</button>
        </div>
      </div>
    </div>

    <!-- Modal for editing playlist -->
    <div id="playlist-modal" class="modal hidden">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h2 id="playlist-modal-title">Edit Playlist</h2>
          <button id="close-playlist-modal" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <div class="playlist-name-edit">
            <label>Playlist Name:</label>
            <input type="text" id="playlist-name-input" maxlength="100">
          </div>

          <div class="modal-section">
            <h3>Videos in Playlist (<span id="playlist-video-count">0</span>)</h3>
            <div id="playlist-videos-list" class="playlist-videos-list">
              <p class="empty-text">No videos in playlist</p>
            </div>
          </div>

          <div class="modal-section">
            <h3>Add Videos</h3>
            <div class="add-videos-search">
              <input type="text" id="playlist-video-search" placeholder="Search videos to add...">
            </div>
            <div id="available-videos-list" class="available-videos-list">
              <p class="empty-text">No videos available</p>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="delete-playlist-btn" class="btn btn-danger">Delete Playlist</button>
          <div class="modal-footer-right">
            <button id="play-playlist-btn" class="btn btn-success">Play Playlist</button>
            <button id="save-playlist-btn" class="btn btn-primary">Save Changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for adding bookmark to playlist -->
    <div id="add-to-playlist-modal" class="modal hidden">
      <div class="modal-content modal-small">
        <div class="modal-header">
          <h2>Add to Playlist</h2>
          <button id="close-add-to-playlist-modal" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <div class="add-to-playlist-bookmark-info">
            <label>Adding:</label>
            <div id="add-to-playlist-title" class="bookmark-title-preview"></div>
          </div>
          <div class="modal-section">
            <h3>Create New Playlist</h3>
            <div class="create-new-playlist-inline">
              <input type="text" id="add-to-playlist-new-name" placeholder="New playlist name..." maxlength="100">
              <button id="add-to-playlist-create-btn" class="btn btn-primary">Create & Add</button>
            </div>
          </div>
          <div class="modal-section">
            <h3>Or Add to Existing Playlist</h3>
            <div id="add-to-playlist-list" class="add-to-playlist-list">
              <p class="empty-text">No playlists available</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="manager.js"></script>
</body>
</html>
